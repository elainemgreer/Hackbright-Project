{% extends 'base.html' %}
{% block head %}

<style>

      #eventlist {
        height: 700px;
        overflow: scroll;
       }

</style>

    
{% endblock %}
{% block body %}


{% if events %}
<h1> Hi, {{ user.name }}! Here are your saved events: </h1>
    

    {% for event in events %}<br>
<div id='event' class='event'>
    <li>{{ event.event_name }}</li>
    <li>{{ event.event_venue }}</li>
    <li>{{ event.event_date }}</li>
    <li>{{ event.event_url }}
    <div class='buttons'>
<br><div class='button' id={{ event.event_id }} name="events" value={{ event.event_id }}>
<i class="fas fa-heart selected-heart"></i>
</div>
    </div>
        </div>
<form action='/showme'>
    <input type="hidden" value={{ event.event_id }} name="event" id="event">
    <button type='submit' id={{ event.event_id }} name='event' value={{ event.event_id }}>Show Me!</button>
</form>
        {% endfor %}


{% else %}
<h1> You have not saved any events yet, or your events have already passed! </h1>
 {% endif %}



<script src="https://code.jquery.com/jquery-3.4.1.js"></script>

<script src="https://kit.fontawesome.com/c00ec74898.js" crossorigin="anonymous"></script>

<script>

var allButtonsOnPage = document.querySelectorAll('.button');

allButtonsOnPage.forEach(function(button) {
  button.addEventListener('click', function() {
    id = this.id
    console.log('hello')
    console.log(id)
    
    const formInputs = {
      'event_id': id
    }

    console.log(formInputs)

    $.post('/removeevents', formInputs, (res) => {
    alert('You have removed an event!')
    location.reload();
      // console.log(events)
    })
// use response to repopulate list with user's updated show list
  });
});

</script>


{% endblock %}